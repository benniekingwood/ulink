<?php

class EventsController extends AppController {
        
        var $name = 'Events';
		var $components = array('RequestHandler');
		var $helpers = array('Html', 'Form', 'Js','Time');
		
		
		//List of schools currently in beta_ulink.schools to test mongoDB structure until user auith in integrated with events
		var $testSchools = array('ODU' => 165, 'POLY' => 167, 'UVA' => 235, 'GMU' => 236, 'JMU' => 237);
		
		/*
		Event structure:
		["Event"]
			["_id"] MongoDB's automatically generated ObjectID
			["userID"] Primary key of user that created the event
			["collegeID"] Primary key of school the event is fore
			["eventDate"]
			["eventAdded"]
				Both eventDate and eventAdded are stored in the format: year-month-day hour(24):minute:second GMT offset, from PHP's function date('Y-m-d H:i:s O')
				i.e. "2012-06-10 13:53:44 -0400"
			["eventTitle"] Short description of event
			["eventInfo"] Detailed description of event
		*/
		
        public function index() {
				$this->layout = 'v2';
				$this->pageTitle = 'Your college everything.';
				$this->chkAutopass();
				
				$events = $this->Event->find('all');
				Controller::loadModel('School');

				foreach($events as &$event)
				{
					$event["Event"]["collegeName"] = $this->School->findById($event["Event"]["collegeID"]);
				}
				
                $this->set('events', $events );
				
				
				
				//$this->Event->create();
				//$data = array("Event" => array('userID' => '10', 'collegeID' => '12', 'eventInfo' => 'This is from Cake'));
				//$this->Event->save($data);
        }

}


?>